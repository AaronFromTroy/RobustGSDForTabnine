---
phase: 05-polish-and-distribution-readiness
plan: 01
type: execute
wave: 2
depends_on: [05-03]
files_modified:
  - gsd/LICENSE
  - gsd/package.json
  - gsd/.npmignore
autonomous: true

must_haves:
  truths:
    - "Package has explicit MIT license in LICENSE file"
    - "Package.json declares public package with repository URL"
    - "Package.json exports field enables subpath imports"
    - "Distribution includes only necessary files (scripts, templates, guidelines, docs)"
    - "Package metadata enables npm search discovery"
  artifacts:
    - path: "gsd/LICENSE"
      provides: "MIT license text"
      min_lines: 20
    - path: "gsd/package.json"
      provides: "Distribution-ready metadata"
      contains: ["exports", "files", "keywords", "repository"]
    - path: "gsd/.npmignore"
      provides: "Distribution file exclusions"
      contains: [".planning", "node_modules"]
  key_links:
    - from: "gsd/package.json"
      to: "gsd/LICENSE"
      via: "license field reference"
      pattern: '"license":\\s*"MIT"'
    - from: "gsd/package.json"
      to: "gsd/scripts/index.js"
      via: "exports field mapping"
      pattern: '"exports":\\s*{'
---

<objective>
Configure package for npm distribution with proper licensing, metadata, and file inclusion control.

Purpose: Make package discoverable on npm, legally distributable, and properly scoped for distribution (exclude dev files, include only necessary artifacts).

Output: Distribution-ready package.json, MIT LICENSE file, and .npmignore configuration.
</objective>

<execution_context>
@~/.claude/get-stuff-done/workflows/execute-plan.md
@~/.claude/get-stuff-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-polish-and-distribution-readiness/05-RESEARCH.md

# Current package.json (needs distribution updates)
@gsd/package.json

# Existing documentation for reference
@gsd/README.md
@gsd/QUICKSTART.md

# Plan 05-03 creates index.js that this plan references in exports
@.planning/phases/05-polish-and-distribution-readiness/05-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Create MIT LICENSE file</name>
  <files>gsd/LICENSE</files>
  <action>
Create standard MIT License file at gsd/LICENSE.

Use MIT License text from https://opensource.org/license/mit:
- Copyright year: 2026
- Copyright holder: "GSD Project Contributors"
- Standard MIT license text (full permissions, warranty disclaimer)

Do NOT use any other license template. MIT is specified in package.json and roadmap.
  </action>
  <verify>cat gsd/LICENSE | grep -i "MIT License" && cat gsd/LICENSE | grep "2026"</verify>
  <done>gsd/LICENSE exists with standard MIT license text, 2026 copyright year</done>
</task>

<task type="auto">
  <name>Update package.json for distribution</name>
  <files>gsd/package.json</files>
  <action>
Update gsd/package.json with distribution-ready metadata.

Changes:
1. Remove "private": true (enable npm publishing)
2. Add "exports" field for subpath imports:
   - ".": "./scripts/index.js" (created in Plan 05-03)
   - "./state-manager": "./scripts/state-manager.js"
   - "./template-renderer": "./scripts/template-renderer.js"
   - "./guideline-loader": "./scripts/guideline-loader.js"
   - "./validator": "./scripts/validator.js"
   - "./researcher": "./scripts/researcher.js"
3. Add "files" field (whitelist approach, safer than .npmignore):
   - "scripts/"
   - "templates/"
   - "guidelines/"
   - "README.md"
   - "QUICKSTART.md"
   - "LICENSE"
   - "CHANGELOG.md" (will be generated by semantic-release)
4. Add "keywords" for npm search:
   - "workflow", "tabnine", "gsd", "project-management", "agent", "automation", "planning", "get-stuff-done"
5. Add "repository" field:
   - type: "git"
   - url: "https://github.com/yourusername/gsd-for-tabnine.git" (placeholder - user will update)
6. Add "bugs" field:
   - url: "https://github.com/yourusername/gsd-for-tabnine/issues"
7. Add "homepage" field:
   - "https://github.com/yourusername/gsd-for-tabnine#readme"
8. Update "main" field fallback: "./scripts/index.js"
9. Keep existing: name, version, description, type, engines, dependencies, devDependencies, author, license

Why exports over main: 2026 best practice enables subpath imports like `import { readState } from 'gsd-for-tabnine/state-manager'` while preventing access to internal modules.

Why files field: Whitelist approach is safer than .npmignore blacklist - only specified files are included in published package, preventing accidental sensitive file leaks.

Why depends_on 05-03: Plan 05-03 creates scripts/index.js that this exports field references. This dependency ensures index.js exists before package.json references it.
  </action>
  <verify>cat gsd/package.json | grep '"exports"' && cat gsd/package.json | grep '"files"' && cat gsd/package.json | grep '"keywords"' && ! grep '"private": true' gsd/package.json</verify>
  <done>package.json has exports, files, keywords, repository, bugs, homepage fields; private: true removed</done>
</task>

<task type="auto">
  <name>Create .npmignore for distribution exclusions</name>
  <files>gsd/.npmignore</files>
  <action>
Create gsd/.npmignore to exclude development and CI files from npm package.

Include exclusions for:
- .planning/ (project planning artifacts)
- node_modules/ (should never be published)
- .git/ and .gitignore
- *.log files
- .gsd-config.json (user creates their own)
- config-schema.json (internal, not needed by users)
- integration-test.js (tests not needed in published package)
- INSTALL-SYMLINK.* (installer scripts, not part of package)
- .github/ (CI workflows, not needed in package)
- .vscode/ and .idea/ (editor configs)
- *.tsbuildinfo (TypeScript build artifacts, if any)

Note: This works alongside package.json "files" field. Files field is whitelist (what to include), .npmignore is additional blacklist. Research recommends files field as primary control, .npmignore as safety net.

Format: One pattern per line, no comments inline (npm ignores # lines).
  </action>
  <verify>cat gsd/.npmignore | grep ".planning" && cat gsd/.npmignore | grep "integration-test.js"</verify>
  <done>gsd/.npmignore excludes .planning/, tests, CI configs, and dev files</done>
</task>

</tasks>

<verification>
1. Run validation checks:
   - `cat gsd/LICENSE` shows MIT license with 2026 copyright
   - `cat gsd/package.json | grep -v private` confirms private field removed
   - `node -e "const pkg = require('./gsd/package.json'); console.log(pkg.exports, pkg.files, pkg.keywords)"` shows all new fields
2. Test package contents preview:
   - `cd gsd && npm pack --dry-run` shows only intended files (scripts/, templates/, guidelines/, docs)
   - No .planning/, no integration-test.js, no .git/ in pack output
3. Verify exports field syntax:
   - Valid JSON structure
   - All referenced files exist (index.js created by Plan 05-03)
</verification>

<success_criteria>
- LICENSE file exists with MIT license text
- package.json ready for npm publish (no private: true, has exports/files/keywords/repo)
- .npmignore prevents dev files from being published
- `npm pack --dry-run` shows clean package contents (no .planning/, no tests)
- All exported modules in exports field exist in scripts/ directory
</success_criteria>

<output>
After completion, create `.planning/phases/05-polish-and-distribution-readiness/05-01-SUMMARY.md`
</output>
